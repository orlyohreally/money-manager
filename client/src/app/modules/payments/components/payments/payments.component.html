<div class="payments" fxLayout="column" fxLayoutAlign="center start">
  <ng-template
    let-familyIdValue="familyIdValue"
    let-familyCurrency="familyCurrency"
    [ngTemplateOutletContext]="{
      familyIdValue: familyId | async,
      familyCurrency: currency | async
    }"
    [ngTemplateOutlet]="familyIdValueTemplate"
    #familyIdValueTemplate
  >
    <div class="page-content__header">
      <div class="mat-h1">Payments</div>
      <button
        [paymentNewPayment]="familyIdValue"
        class="button button_lg"
        mat-raised-button
        color="primary"
      >
        New payment
      </button>
    </div>

    <ng-template
      let-paymentsList="paymentsList"
      [ngTemplateOutletContext]="{ paymentsList: payments | async }"
      [ngTemplateOutlet]="paymentsListTemplate"
      #paymentsListTemplate
    >
      <payment-payment-list
        [payments]="paymentsList"
        [currency]="familyCurrency"
      >
      </payment-payment-list>
      <payment-payments-calculated-per-member
        *ngIf="paymentsList?.length"
        class="payments-calculated-per-member"
        [payments]="paymentsList"
        [currency]="familyCurrency"
      ></payment-payments-calculated-per-member>
      <payment-member-overpay-and-debt
        class="member-overpay-and-debt"
        [familyId]="familyIdValue"
        [currency]="familyCurrency"
      ></payment-member-overpay-and-debt>
    </ng-template>
  </ng-template>
</div>
