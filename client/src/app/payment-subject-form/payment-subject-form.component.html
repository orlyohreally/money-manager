<div class="subject-form">
  <h1 mat-dialog-title>
    Payment Subject
  </h1>
  <div mat-dialog-content>
    <form [formGroup]="subjectForm">
      <mat-form-field>
        <mat-label>Subject name</mat-label>
        <input required type="text" matInput formControlName="name" />
        <mat-error *ngIf="name.invalid">{{ getErrorMessage() }}</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Family</mat-label>
        <mat-select required formControlName="familyId">
          <mat-option
            *ngFor="let family of families | keyvalue"
            [value]="family.value._id"
          >
            {{ family.value.name }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="familyId.invalid">{{ getErrorMessage() }}</mat-error>
      </mat-form-field>

      <div class="subject-icon-field">
        <label class="subject-label-icon">Icon</label>
        <div class="subject-icons">
          <img
            class="subject-icon clickable"
            [ngClass]="{ selected: subjectForm.value.icon === icon.path }"
            src="{{ icon.path }}"
            *ngFor="let icon of subjectIcons"
            (click)="selectIcon(icon)"
          />
        </div>
      </div>
    </form>
  </div>
  <div mat-dialog-actions>
    <button mat-raised-button color="warn" (click)="cancel()">
      <mat-icon>clear</mat-icon>Cancel
    </button>
    <button
      mat-raised-button
      color="primary"
      (click)="saveSubject()"
      cdkFocusInitial
    >
      <mat-icon>done</mat-icon> Save
    </button>
  </div>
</div>
